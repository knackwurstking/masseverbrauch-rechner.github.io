(function(){const c=document.createElement("link").relList;if(c&&c.supports&&c.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))i(n);new MutationObserver(n=>{for(const r of n)if(r.type==="childList")for(const t of r.addedNodes)t.tagName==="LINK"&&t.rel==="modulepreload"&&i(t)}).observe(document,{childList:!0,subtree:!0});function e(n){const r={};return n.integrity&&(r.integrity=n.integrity),n.referrerPolicy&&(r.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?r.credentials="include":n.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(n){if(n.ep)return;n.ep=!0;const r=e(n);fetch(n.href,r)}})();const w="modulepreload",b=function(s){return"/masseverbrauch-rechner.github.io/"+s},h={},q=function(c,e,i){let n=Promise.resolve();if(e&&e.length>0){document.getElementsByTagName("link");const t=document.querySelector("meta[property=csp-nonce]"),o=(t==null?void 0:t.nonce)||(t==null?void 0:t.getAttribute("nonce"));n=Promise.allSettled(e.map(l=>{if(l=b(l),l in h)return;h[l]=!0;const a=l.endsWith(".css"),m=a?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${m}`))return;const d=document.createElement("link");if(d.rel=a?"stylesheet":w,a||(d.as="script"),d.crossOrigin="",d.href=l,o&&d.setAttribute("nonce",o),document.head.appendChild(d),a)return new Promise((u,p)=>{d.addEventListener("load",u),d.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${l}`)))})}))}function r(t){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=t,window.dispatchEvent(o),!o.defaultPrevented)throw t}return n.then(t=>{for(const o of t||[])o.status==="rejected"&&r(o.reason);return c().catch(r)})};function E(s={}){const{immediate:c=!1,onNeedRefresh:e,onOfflineReady:i,onRegistered:n,onRegisteredSW:r,onRegisterError:t}=s;let o,l,a;const m=async(u=!0)=>{await l,a==null||a()};async function d(){if("serviceWorker"in navigator){if(o=await q(async()=>{const{Workbox:u}=await import("./workbox-window.prod.es5-B9K5rw8f.js");return{Workbox:u}},[]).then(({Workbox:u})=>new u("/masseverbrauch-rechner.github.io/sw.js",{scope:"/masseverbrauch-rechner.github.io/",type:"classic"})).catch(u=>{t==null||t(u)}),!o)return;a=()=>{o==null||o.messageSkipWaiting()};{let u=!1;const p=()=>{u=!0,o==null||o.addEventListener("controlling",f=>{f.isUpdate&&window.location.reload()}),e==null||e()};o.addEventListener("installed",f=>{typeof f.isUpdate>"u"?typeof f.isExternal<"u"&&f.isExternal?p():!u&&(i==null||i()):f.isUpdate||i==null||i()}),o.addEventListener("waiting",p)}o.register({immediate:c}).then(u=>{r?r("/masseverbrauch-rechner.github.io/sw.js",u):n==null||n(u)}).catch(u=>{t==null||t(u)})}}return l=d(),m}function T(s,c){let e=null;async function i(n){var r,t;if(e!==null&&(((r=e.template)==null?void 0:r.onDestroy)!==void 0&&e.template.onDestroy(),e.onDestroy!==void 0&&e.onDestroy()),e=n,e.title!==void 0){const o=document.querySelector("head > title");o!==null&&(o.innerHTML=e.title)}if((e==null?void 0:e.href)!==void 0){const o=await(await fetch(e.href)).text();s.innerHTML=o,e.scripts!==void 0&&e.scripts.forEach(l=>{const a=document.createElement("script");a.setAttribute("data-template",e.href),a.src=l.src,s.appendChild(a)})}if((e==null?void 0:e.onMount)!==void 0&&e.onMount(),(e==null?void 0:e.template)!==void 0){let o=s;e.template.target!==void 0&&(o=document.querySelector(e.template.target));const l=document.querySelector(e.template.selector);if(l===null)throw`${e.template.selector} not found`;l instanceof HTMLTemplateElement?(o.innerHTML="",o.appendChild(l.content.cloneNode(!0))):o.innerHTML=l.innerHTML,((t=e.template)==null?void 0:t.onMount)!==void 0&&e.template.onMount()}}window.addEventListener("hashchange",()=>{const n=window.location.hash.replace("#","");let r="";for(const t of Object.keys(c))n.startsWith(t)&&t>r&&(r=t);if(!r){const t=c["/"];if(t===void 0){console.warn(`Window location “${n}” is missing in routes, and the fallback route “/“ is also missing.`);return}i(t);return}i(c[r])}),window.dispatchEvent(new Event("hashchange"))}function P(s,c){let e;if(s?e=`?${Object.entries(s).map(([i,n])=>`${encodeURIComponent(i)}=${encodeURIComponent(n)}`).join("&")}`:e="",!c&&!e){location.hash="";return}location.hash=`#${encodeURIComponent(c)}`+(e?`&${e}`:"")}function L(){const s={};return location.hash.replace(/^#.*\?/,"").split("?").forEach(c=>{c.split("&").forEach(e=>{const[i,n]=e.split("=");s[decodeURIComponent(i)]=decodeURIComponent(n)})}),s}const $=Object.freeze(Object.defineProperty({__proto__:null,getSearchParam:L,goTo:P,init:T},Symbol.toStringTag,{value:"Module"})),k=Object.freeze(Object.defineProperty({__proto__:null,hash:$},Symbol.toStringTag,{value:"Module"})),x="v0.2.2",_=5,C=["A / B","C / D","E / F","G / H","I / J"];async function M(s){return console.debug(s),new Promise(c=>{const e=document.querySelector('dialog[name="results"]');e.onclose=()=>{c()};const i=e.querySelector(".content"),n=e.querySelector("button.close"),r=e.querySelector(".main-kg"),t=e.querySelector(".main-percent"),o=e.querySelector('template[name="slot-item"]');n.onclick=()=>e.close(),r.innerText=`${s.main.kg.toFixed(2)} KG`,t.innerText=`${s.main.percent.toFixed(2)} %`,i.querySelectorAll(".slot-item").forEach(a=>i.removeChild(a)),s.slots.forEach((a,m)=>{const d=o.content.cloneNode(!0).querySelector(".slot-item");d.querySelector(".name").innerText=`${C[m]}:`,d.querySelector(".kg").innerText=`${a.kg.toFixed(2)} KG`,d.querySelector(".percent").innerText=`${a.percent.toFixed(2)} %`,i.appendChild(d)}),e.showModal()})}function F(s){const c={kg:s.flow*(s.runtime*60),percent:0},e=[];let i=0,n;s.slots.forEach(o=>{i+=n=o.after-o.before,e.push({kg:n,percent:0})});let r=0;const t=c.kg+i;return e.forEach(o=>{o.percent=o.kg/(t/100),r+=o.percent}),c.percent=100-r,{data:s,main:c,slots:e}}const v="1.5";async function y(){const s=document.querySelector("#routerTarget"),c=s.querySelector("form"),e=s.querySelector('input[type="reset"]'),i=s.querySelector("input#main-flow"),n=s.querySelector("input#main-runtime"),r=[];for(const t of["1","2","3","4","5"])r.push({before:s.querySelector(`input#tower-slot-${t}-before`),after:s.querySelector(`input#tower-slot-${t}-after`)});i.value=v,n.value="",r.forEach(t=>{t.before.value="",t.after.value=""}),e.onclick=t=>{t.preventDefault(),I()},c.onsubmit=async()=>{if(i.value)i.ariaInvalid=null;else{i.ariaInvalid="";return}if(n.value)n.ariaInvalid=null;else{n.ariaInvalid="";return}await M(F({flow:parseFloat(i.value||v),runtime:parseFloat(n.value||"0"),slots:r.map(t=>({before:parseFloat(t.before.value||"0"),after:parseFloat(t.after.value||"0")}))}))}}async function g(){}async function I(){await g(),await y()}const U=E({async onNeedRefresh(){confirm("Update verfügbar. Zum Aktualisieren bestätigen.")&&await U()}}),S=document.querySelector(".version-container");S.querySelector(".version").innerText=`${x} `;S.querySelector(".build").innerText=`[Build: ${_}]`;k.hash.init(document.querySelector("#routerTarget"),{"/":{title:"Masseverbrauch Rechner",template:{selector:'template[name="root"]',onMount(){y()},onDestroy(){g()}}}});
